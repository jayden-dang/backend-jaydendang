#+TITLE: API Docs
#+AUTHOR: Dang Quang Vu

* Test
#+name: host
#+BEGIN_SRC elisp
"http://localhost:8080"
#+END_SRC

#+name: headers
#+BEGIN_SRC elisp
"Content-Type: application/json
User-Agent: Emacs30"
#+END_SRC

#+begin_src restclient :var host=host :var headers=headers
GET :host/api/v1
#+end_src

* Api
** Create user
#+begin_src restclient :var host=host :var headers=headers
POST :host/api/v1/users
:headers
{
  "email": "j1aydeuaai111i@gmail.com",
  "username": "j1aaaaayd1122endaang111",
  "password_hash": "passawordasdflkaj",
  "first_name": "first_naame",
  "last_name": "last_namae"
}
#+end_src

#+RESULTS:
#+BEGIN_SRC js
{
  "data": {
    "created_at": "2025-05-26T14:44:05.154709Z",
    "email": "j1aydeuaai111i@gmail.com",
    "email_verified": false,
    "first_name": "first_naame",
    "last_name": "last_namae",
    "password_hash": "passawordasdflkaj",
    "updated_at": "2025-05-26T14:44:05.154709Z",
    "user_id": "23464133-918a-43df-a706-8d91be96e456",
    "username": "j1aaaaayd1122endaang111"
  },
  "id": "e05dbb9b-f47a-43cf-91b8-5025ae6d5f36",
  "meta": {
    "timestamp": "2025-05-26T14:44:05.174686Z"
  },
  "status": 0,
  "type": "success"
}
// POST http://localhost:8080/api/v1/users
// HTTP/1.1 200 OK
// content-type: application/json
// content-length: 451
// date: Mon, 26 May 2025 14:44:05 GMT
// Request duration: 0.033510s
#+END_SRC

#+begin_src restclient :var host=host :var headers=headers
GET :host/api/v1/users
#+end_src

#+RESULTS:
#+BEGIN_SRC js
{
  "code": 404,
  "message": "Route not found",
  "path": "The requested resource does not exist",
  "status": "error",
  "timestamp": "2025-05-25T06:07:49.767722Z"
}
// GET http://localhost:8080/api/v1/users
// HTTP/1.1 404 Not Found
// content-type: application/json
// content-length: 146
// date: Sun, 25 May 2025 06:07:49 GMT
// Request duration: 0.007698s
#+END_SRC
** Get User by Username
#+begin_src restclient :var host=host :var headers=headers
GET :host/api/v1/users?email=john.doe@example.com
#+end_src

#+RESULTS:
#+BEGIN_SRC js
{
  "data": {
    "created_at": "2025-05-25T09:07:48.122931Z",
    "email": "john.doe@example.com",
    "email_verified": true,
    "first_name": "John",
    "last_name": "Doe",
    "password_hash": "hashed_pw_123",
    "updated_at": "2025-05-25T09:07:48.122931Z",
    "user_id": "f08f8c2b-44b1-43ca-bbef-c837b3fcdb4c",
    "username": "johndoe"
  },
  "id": "f4465b0d-e3fd-4fdc-bc60-d20b872027aa",
  "meta": {
    "timestamp": "2025-05-26T06:07:52.538416Z"
  },
  "status": 0,
  "type": "success"
}
// GET http://localhost:8080/api/v1/users?email=john.doe@example.com
// HTTP/1.1 200 OK
// content-type: application/json
// content-length: 412
// date: Mon, 26 May 2025 06:07:52 GMT
// Request duration: 0.056443s
#+END_SRC
