#+TITLE: API Docs
#+AUTHOR: Dang Quang Vu

* Test
#+name: host
#+BEGIN_SRC elisp
"http://localhost:8080"
#+END_SRC

#+name: headers
#+BEGIN_SRC elisp
"Content-Type: application/json
User-Agent: Emacs30"
#+END_SRC

#+begin_src restclient :var host=host :var headers=headers
GET :host/api/v1
#+end_src

#+RESULTS:
#+BEGIN_SRC js
{
  "data": {
    "id": 1,
    "username": "hello"
  },
  "id": "05424404-60c9-4e89-97e2-b7c5c0be14cf",
  "meta": {
    "timestamp": "2025-05-25T14:22:29.273424Z"
  },
  "status": 0,
  "type": "success"
}
// GET http://localhost:8080/api/v1
// HTTP/1.1 200 OK
// content-type: application/json
// content-length: 159
// date: Sun, 25 May 2025 14:22:29 GMT
// Request duration: 0.006228s
#+END_SRC

* Api
#+begin_src restclient :var host=host :var headers=headers
POST :host/api/v1/users
:headers
{
  "email": "jayden.dangvu@gmail.com",
  "username": "jaydendang",
  "password_hash": "passawordasdflkaj",
  "first_name": "first_naame",
  "last_name": "last_namae"
}
#+end_src

#+RESULTS:
#+BEGIN_SRC js
{
  "error": {
    "details": null,
    "error_code": "UNKNOWN_CORE_ERROR",
    "message": "Unknown core error occurred",
    "request_id": null,
    "timestamp": "2025-05-25T15:12:27.056127+00:00"
  },
  "id": "14a79e2c-731b-4bcd-87e3-183c843314d4",
  "meta": {
    "timestamp": "2025-05-25T15:12:27.056358Z"
  },
  "status": 1,
  "type": "error"
}
// POST http://localhost:8080/api/v1/users
// HTTP/1.1 500 Internal Server Error
// content-type: application/json
// content-length: 286
// date: Sun, 25 May 2025 15:12:27 GMT
// Request duration: 0.036053s
#+END_SRC

#+begin_src restclient :var host=host :var headers=headers
GET :host/api/v1/users
#+end_src

#+RESULTS:
#+BEGIN_SRC js
{
  "code": 404,
  "message": "Route not found",
  "path": "The requested resource does not exist",
  "status": "error",
  "timestamp": "2025-05-25T06:07:49.767722Z"
}
// GET http://localhost:8080/api/v1/users
// HTTP/1.1 404 Not Found
// content-type: application/json
// content-length: 146
// date: Sun, 25 May 2025 06:07:49 GMT
// Request duration: 0.007698s
#+END_SRC
