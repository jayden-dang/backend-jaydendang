#+TITLE: API Docs
#+AUTHOR: Dang Quang Vu

* Test
#+name: host
#+BEGIN_SRC elisp
"http://localhost:8080"
#+END_SRC

#+name: headers
#+BEGIN_SRC elisp
"Content-Type: application/json
User-Agent: Emacs30"
#+END_SRC


#+begin_src restclient :var host=host
GET :host
#+end_src

#+RESULTS:
#+BEGIN_SRC js
{
  "data": null,
  "id": "418924ac-1f15-4496-a9c8-c789264b3bf4",
  "meta": {
    "timestamp": "2025-05-24T03:30:38.513052Z"
  },
  "status": "success"
}
// GET http://localhost:8080
// HTTP/1.1 200 OK
// content-type: application/json
// content-length: 127
// date: Sat, 24 May 2025 03:30:38 GMT
// Request duration: 0.008552s
#+END_SRC

* Api

#+begin_src restclient :var host=host :var headers=headers
POST :host/api/login
:headers
{
  "username": "demo1",
  "pwd": "welcome"
}
#+end_src

#+RESULTS:
#+BEGIN_SRC js
{
  "data": {
    "result": {
      "success": true,
      "token": "user-1.exp.sign",
      "user": {
        "role": "admin",
        "username": "demo1"
      }
    }
  },
  "id": "63ef1673-a6c3-4e56-ab59-4ff5493b8bce",
  "meta": {
    "timestamp": "2025-05-24T03:42:37.722784Z"
  },
  "status": "success"
}
// POST http://localhost:8080/api/login
// HTTP/1.1 200 OK
// content-type: application/json
// set-cookie: auth-token=user-1.exp.sign
// content-length: 219
// date: Sat, 24 May 2025 03:42:37 GMT
// Request duration: 0.024746s
#+END_SRC
