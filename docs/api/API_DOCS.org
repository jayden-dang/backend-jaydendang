#+TITLE: API Docs
#+AUTHOR: Dang Quang Vu

* Test
#+name: host
#+BEGIN_SRC elisp
"http://localhost:8080"
#+END_SRC

#+name: headers
#+BEGIN_SRC elisp
"Content-Type: application/json
User-Agent: Emacs30"
#+END_SRC


#+begin_src restclient :var host=host
GET :host
#+end_src

#+RESULTS:
#+BEGIN_SRC js
{
  "data": {
    "data": "Hello, World!"
  },
  "id": "8792ac9a-f15d-474c-9250-58aa76ea9581",
  "meta": {
    "timestamp": "2025-05-24T04:20:18.276446Z"
  },
  "status": 0,
  "type": "success"
}
// GET http://localhost:8080
// HTTP/1.1 200 OK
// content-type: application/json
// content-length: 156
// date: Sat, 24 May 2025 04:20:18 GMT
// Request duration: 0.004302s
#+END_SRC

* Api

#+begin_src restclient :var host=host :var headers=headers
POST :host/api/login?order_by=id
:headers
{
  "username": "demo1",
  "pwd": "welcome"
}
#+end_src

#+RESULTS:
#+BEGIN_SRC js
{
  "data": {
    "result": {
      "success": true,
      "user": {
        "role": "admin",
        "username": "demo1"
      }
    }
  },
  "id": "f92f1366-b30a-4922-a8c2-c0ddbf58abdc",
  "meta": {
    "timestamp": "2025-05-24T04:19:35.49156Z"
  },
  "status": 0,
  "type": "success"
}
// POST http://localhost:8080/api/login?order_by=id
// HTTP/1.1 200 OK
// content-type: application/json
// set-cookie: auth-token=user-1.exp.sign
// content-length: 201
// date: Sat, 24 May 2025 04:19:35 GMT
// Request duration: 0.007811s
#+END_SRC

#+begin_src json
{
  "duration_ms": 1.398,
  "id": "8792ac9a-f15d-474c-9250-58aa76ea9581",
  "request": {
    "method": "GET",
    "path": "/"
  },
  "response": {
    "body": {
      "data": {
        "data": "Hello, World!"
      },
      "id": "8792ac9a-f15d-474c-9250-58aa76ea9581",
      "meta": {
        "timestamp": "2025-05-24T04:20:18.276446Z"
      },
      "status": 0,
      "type": "success"
    },
    "size": 156,
    "status": "success"
  },
  "timestamp": "2025-05-24T04:20:18.276508Z"
}
#+end_src
